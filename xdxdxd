plugins {
    id 'java'
    id 'org.springframework.boot' version '3.2.0'
    id 'io.spring.dependency-management' version '1.1.4'
    id 'org.owasp.dependencycheck' version '12.1.8'
}

group = 'com.ejemplo'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '17'

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    runtimeOnly 'com.h2database:h2'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}

// Configuración del plugin OWASP Dependency Check
dependencyCheck {
    // Formato de reporte (HTML, JSON, CSV, XML, JUNIT, SARIF, JENKINS, ALL)
    formats = ['HTML', 'JSON']
    
    // Directorio donde se guardarán los reportes
    outputDirectory = file("$buildDir/reports/dependency-check")
    
    // Nivel de severidad mínimo para fallar el build (LOW, MEDIUM, HIGH, CRITICAL)
    failBuildOnCVSS = 7  // Falla si encuentra vulnerabilidades con CVSS >= 7
    
    // Actualizar la base de datos de vulnerabilidades
    autoUpdate = true
    
    // Supresión de falsos positivos (opcional)
    suppressionFile = file('dependency-check-suppressions.xml')
    
    // Analizar solo dependencias de runtime y compile
    scanConfigurations = ['runtimeClasspath', 'compileClasspath']
}


management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
      base-path: /  # Cambia de /actuator a /
  endpoint:
    health:
      show-details: always



///////////////////

# Ejecutar el análisis de dependencias
./gradlew dependencyCheckAnalyze

# Actualizar la base de datos de vulnerabilidades
./gradlew dependencyCheckUpdate

# Limpiar datos y reportes
./gradlew dependencyCheckPurge

# Ejecutar análisis y generar reporte agregado
./gradlew dependencyCheckAggregate



On that page, please verify your email address and use the following UUID: CEB6A2C7-2EBB-F011-8364-0EBF96DE670D

1b0cbff1-079c-4bf9-beb4-3c528d735820


